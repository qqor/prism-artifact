diff --git a/src/fmt.c b/src/fmt.c
index 8164e1ca..b06104bd 100644
--- a/src/fmt.c
+++ b/src/fmt.c
@@ -315,11 +315,11 @@ size_t mg_vxprintf(void (*out)(char, void *), void *param, const char *fmt,
         for (j = 0; minus && pr < w && j + pr < w; j++)
           n += scpy(out, param, &pad, 1);
       } else if (c == 'e' || c == 'E') {
-		  char tmp[8];
+		  char tmp[32];
           double d = va_arg(*ap, double);
           int64_t exponent = (int64_t)log10(my_fabs(d));
           double mantissa = d / power(10, exponent);
-          k = mg_dtoa(tmp, 10, mantissa, 8, c == 'e');
+          k = mg_dtoa(tmp, sizeof(tmp), mantissa, 8, c == 'e');
           n += scpy(out, param, tmp, k);
           out(c, param);
           n++;
