diff --git a/src/cmsvirt.c b/src/cmsvirt.c
index 4439ff7..3baef37 100644
--- a/src/cmsvirt.c
+++ b/src/cmsvirt.c
@@ -1069,6 +1069,7 @@ cmsHPROFILE CreateNamedColorDevicelink(cmsHTRANSFORM xform)
     _cmsTRANSFORM* v = (_cmsTRANSFORM*) xform;
     cmsHPROFILE hICC = NULL;
     cmsUInt32Number i, nColors;
+    cmsUInt16Number index;
     cmsNAMEDCOLORLIST *nc2 = NULL, *Original = NULL;
 
     // Create an empty placeholder
@@ -1100,7 +1101,8 @@ cmsHPROFILE CreateNamedColorDevicelink(cmsHTRANSFORM xform)
 
     // Apply the transfor to colorants.
     for (i=0; i < nColors; i++) {
-        cmsDoTransform(xform, &i, nc2 ->List[i].DeviceColorant, 1);
+        index = (cmsUInt16Number) i;
+        cmsDoTransform(xform, &index, nc2 ->List[i].DeviceColorant, 1);
     }
 
     if (!cmsWriteTag(hICC, cmsSigNamedColor2Tag, (void*) nc2)) goto Error;
