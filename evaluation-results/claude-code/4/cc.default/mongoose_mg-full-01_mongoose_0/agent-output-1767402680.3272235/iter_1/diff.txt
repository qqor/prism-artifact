diff --git a/src/json.c b/src/json.c
index cf6bc57b..341317a6 100644
--- a/src/json.c
+++ b/src/json.c
@@ -127,7 +127,7 @@ int mg_json_get(struct mg_str json, const char *path, int *toklen) {
   const char *s = json.buf;
   int len = (int) json.len;
   enum { S_VALUE, S_KEY, S_COLON, S_COMMA_OR_EOO } expecting = S_VALUE;
-  unsigned char nesting[MG_JSON_MAX_DEPTH];
+  unsigned char nesting[MG_JSON_MAX_NESTING + 1];
   int i = 0;             // Current offset in `s`
   int j = 0;             // Offset in `s` we're looking for (return value)
   int depth = 0;         // Current depth (nesting level)
