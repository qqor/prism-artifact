--- a/epan/dissectors/packet-bat.c
+++ b/epan/dissectors/packet-bat.c
@@ -643,48 +643,33 @@
 	struct vis_packet_v23 *vis_packeth;
 	uint32_t sender_ip;
 	proto_tree *bat_vis_tree = NULL;
-	int vis_packeth_raw_data_size=0;
-	char vis_packeth_raw_data[1024];
-	char d_output_buffer[1024];
 
 	tvbuff_t *next_tvb;
-	int length_remaining, i, offset;
-
-	d_output_buffer[0] = 0;
+	int length_remaining, i;
+	int offset = 0;
 
 	vis_packeth = wmem_new(pinfo->pool, struct vis_packet_v23);
 
 	sender_ip = tvb_get_ipv4(tvb, 0);
 	set_address_tvb(&vis_packeth->sender_ip, AT_IPv4, 4, tvb, 0);
-	offset = 8;
-	vis_packeth->version = tvb_get_uint8(tvb, offset++);
-	vis_packeth->gw_class = tvb_get_uint8(tvb, offset++);
-	vis_packeth->tq_max = tvb_get_uint8(tvb, offset++);
-	vis_packeth_raw_data_size = tvb_get_uint32(tvb, offset++, 0);
-	offset += 4;
-	if ((unsigned long)vis_packeth_raw_data_size > sizeof(vis_packeth_raw_data))
-		return;
-
-	for (i=0; i < vis_packeth_raw_data_size; i++) {
-		vis_packeth_raw_data[i] = tvb_get_uint8(tvb, offset);
-		offset++;
-	}
+	vis_packeth->version = tvb_get_uint8(tvb, 4);
+	vis_packeth->gw_class = tvb_get_uint8(tvb, 5);
+	vis_packeth->tq_max = tvb_get_uint8(tvb, 6);
 
 	/* set protocol name */
 	col_set_str(pinfo->cinfo, COL_PROTOCOL, "BAT_VIS");
 
 	/* Set info column */
 	col_add_fstr(pinfo->cinfo, COL_INFO, "Src: %s",
-			address_with_resolution_to_str(pinfo->pool, &vis_packeth->sender_ip));
+		     address_with_resolution_to_str(pinfo->pool, &vis_packeth->sender_ip));
 
 	/* Set tree info */
 	if (tree) {
 		proto_item *ti;
 
 		ti = proto_tree_add_protocol_format(tree, proto_bat_vis, tvb, 0, VIS_PACKET_V23_SIZE,
-								"B.A.T.M.A.N. Vis, Src: %s",
-								address_with_resolution_to_str(pinfo->pool, &vis_packeth->sender_ip));
-		snprintf(d_output_buffer, sizeof(d_output_buffer), "B.A.T.M.A.N. Vis, raw_data %s", vis_packeth_raw_data);
+							    "B.A.T.M.A.N. Vis, Src: %s",
+							    address_with_resolution_to_str(pinfo->pool, &vis_packeth->sender_ip));
 		bat_vis_tree = proto_item_add_subtree(ti, ett_bat_vis);
 
 		/* items */
@@ -701,8 +686,8 @@
 		/*offset += 1;*/
 	}
 
-	if ((vis_packeth_raw_data_size > 4) && (strlen(vis_packeth_raw_data) > 4))
-		fprintf(stderr, d_output_buffer);
+	/* Calculate offset even when we got no tree */
+	offset = VIS_PACKET_V23_SIZE;
 
 	tap_queue_packet(bat_tap, pinfo, vis_packeth);
 
