--- a/epan/dissectors/packet-irc.c
+++ b/epan/dissectors/packet-irc.c
@@ -366,11 +366,11 @@
              return;
          }
  
-         memset(channel_name, 0, CHANNELLEN+1);
-         tvb_memcpy(tvb, channel_name, start_offset, (length < CHANNELLEN) ? length : CHANNELLEN);
-         proto_item_append_text(tree, "Channel: %s", channel_name);
- 
-         proto_tree_add_item(tree, hf_irc_request_command_join_channel, tvb, start_offset, length, ENC_ASCII);
+        memset(channel_name, 0, CHANNELLEN+1);
+        tvb_memcpy(tvb, channel_name, start_offset, (end_offset-start_offset < CHANNELLEN) ? end_offset-start_offset : CHANNELLEN);
+        proto_item_append_text(tree, "Channel: %s", channel_name);
+
+        proto_tree_add_item(tree, hf_irc_request_command_join_channel, tvb, start_offset, end_offset-start_offset, ENC_ASCII);
          start_offset = end_offset + 1;
      }
  
@@ -434,11 +434,11 @@
              return;
          }
  
-         memset(channel_name, 0, CHANNELLEN+1);
-         tvb_memcpy(tvb, channel_name, start_offset, (length < CHANNELLEN) ? length : CHANNELLEN);
-         proto_item_append_text(tree, "Channel: %s", channel_name);
- 
-         proto_tree_add_item(tree, hf_irc_request_command_join_channel, tvb, start_offset, length, ENC_ASCII);
+        memset(channel_name, 0, CHANNELLEN+1);
+        tvb_memcpy(tvb, channel_name, start_offset, (end_offset-start_offset < CHANNELLEN) ? end_offset-start_offset : CHANNELLEN);
+        proto_item_append_text(tree, "Channel: %s", channel_name);
+
+        proto_tree_add_item(tree, hf_irc_request_command_join_channel, tvb, start_offset, end_offset-start_offset, ENC_ASCII);
          start_offset = end_offset + 1;
      }
  
@@ -559,9 +559,9 @@
              return;
          }
  
-         memset(channel_name, 0, CHANNELLEN+1);
-         tvb_memcpy(tvb, channel_name, start_offset, length);
-         proto_item_append_text(tree, "Channel: %s", channel_name);
+        memset(channel_name, 0, CHANNELLEN+1);
+        tvb_memcpy(tvb, channel_name, start_offset, (end_offset-start_offset < CHANNELLEN) ? end_offset-start_offset : CHANNELLEN);
+        proto_item_append_text(tree, "Channel: %s", channel_name);
  
          proto_tree_add_item(tree, hf_irc_request_command_names_channel, tvb, start_offset, end_offset-start_offset, ENC_ASCII);
          start_offset = end_offset + 1;
