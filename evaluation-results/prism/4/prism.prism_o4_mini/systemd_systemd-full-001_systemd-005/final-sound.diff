--- a/src/basic/alloc-util.h
+++ b/src/basic/alloc-util.h
@@ -103,7 +103,11 @@
 }
 
 static inline void freep(void *p) {
-        free(*(void**) p);
+        void **pp = (void**) p;
+        if (*pp) {
+                free(*pp);
+                *pp = NULL;
+        }
 }
 
 #define _cleanup_free_ _cleanup_(freep)
