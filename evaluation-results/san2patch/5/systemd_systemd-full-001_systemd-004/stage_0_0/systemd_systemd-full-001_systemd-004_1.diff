diff --git a/src/shared/condition.c b/src/shared/condition.c
index 67894f9319..029b2a2b9f 100644
--- a/src/shared/condition.c
+++ b/src/shared/condition.c
@@ -119,24 +119,27 @@ static int condition_test_kernel_command_line(Condition *c, char **env) {
                 return r;
 
         bool equal = strchr(c->parameter, '=');
-
-        STRV_FOREACH(word, args) {
-                bool found;
-
-                if (equal)
-                        found = streq(*word, c->parameter);
-                else {
+        bool found = false;
+        size_t i;
+
+        for (i = 0; args[i]; i++) {
+                if (equal) {
+                        if (streq(args[i], c->parameter)) {
+                                found = true;
+                                break;
+                        }
+                } else {
                         const char *f;
 
-                        f = startswith(*word, c->parameter);
-                        found = f && IN_SET(*f, 0, '=');
+                        f = startswith(args[i], c->parameter);
+                        if (f && IN_SET(*f, 0, '=')) {
+                                found = true;
+                                break;
+                        }
                 }
-
-                if (found)
-                        return true;
         }
 
-        return false;
+        return found;
 }
 
 static int condition_test_credential(Condition *c, char **env) {
