diff --git a/src/shared/condition.c b/src/shared/condition.c
index 67894f9319..a1da065d7c 100644
--- a/src/shared/condition.c
+++ b/src/shared/condition.c
@@ -119,24 +119,28 @@ static int condition_test_kernel_command_line(Condition *c, char **env) {
                 return r;
 
         bool equal = strchr(c->parameter, '=');
-
-        STRV_FOREACH(word, args) {
-                bool found;
-
-                if (equal)
-                        found = streq(*word, c->parameter);
-                else {
+        bool found = false;
+        char **p = args;
+
+        while (*p) {
+                if (equal) {
+                        if (streq(*p, c->parameter)) {
+                                found = true;
+                                break;
+                        }
+                } else {
                         const char *f;
 
-                        f = startswith(*word, c->parameter);
-                        found = f && IN_SET(*f, 0, '=');
+                        f = startswith(*p, c->parameter);
+                        if (f && IN_SET(*f, 0, '=')) {
+                                found = true;
+                                break;
+                        }
                 }
-
-                if (found)
-                        return true;
+                p++;
         }
 
-        return false;
+        return found;
 }
 
 static int condition_test_credential(Condition *c, char **env) {
