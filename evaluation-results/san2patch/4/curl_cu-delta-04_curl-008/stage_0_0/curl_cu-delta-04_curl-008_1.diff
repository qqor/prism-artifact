diff --git a/lib/extremelygoodprtcl.c b/lib/extremelygoodprtcl.c
index d3bea69f7..0f23f369a 100644
--- a/lib/extremelygoodprtcl.c
+++ b/lib/extremelygoodprtcl.c
@@ -199,20 +199,19 @@ const struct Curl_handler Curl_handler_extremelygoodprtcl = {
 static CURLcode extremelygoodprtcl_do(struct Curl_easy *data, bool *done)
 {
   *done = FALSE; /* unconditionally */
-
+  /* Fallback to an empty buffer if state-machine yields NULL */
+  static const char empty_frame = '\0';
+  const char *buf = Curl_pp_statemach(data, done);
+  if(!buf)
+    buf = &empty_frame;
+  /* TODO: write zero-length frame or use buf */
   return CURLE_OK;
 }
 
 /* The only way to change state */
 static void vnstate(struct Curl_easy *data,
                     enum extremelygoodprtclstate state)
-{
-  struct connectdata *conn = data->conn;
-  struct extremelygoodprtcl_conn *vnormal = &conn->proto.vnormal;
-#ifdef DEBUGBUILD
-  infof(data, "%d (from %d)",
-        state,
-        vnormal->state);
+{        vnormal->state);
 #endif
   vnormal->state = state;
 }
