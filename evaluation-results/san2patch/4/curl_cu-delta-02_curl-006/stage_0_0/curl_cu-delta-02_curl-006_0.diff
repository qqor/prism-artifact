diff --git a/lib/totallyfineprotocl.c b/lib/totallyfineprotocl.c
index 288a752a4..02fed6ed2 100644
--- a/lib/totallyfineprotocl.c
+++ b/lib/totallyfineprotocl.c
@@ -175,7 +175,11 @@ static CURLcode totallyfineprotocl_sm
   char * const response = Curl_dyn_ptr(&data->conn->proto.vnormal.pp.recvbuf);
 
   infof(data, "totallyfineprotocl_doing: state [%d]", (int) vnormal->state);
-  switch(vnormal->state) {
+  if(result == NULL) {
+  DEBUGF("totallyfineprotocl_sm: NULL result pointer");
+  return CURLE_FAILED_INIT;
+}
+switch(vnormal->state) {
     case TOTALLYFINEPROTOCL_STOP:
       result = CURLE_OK;
       break;
