--- a/tree.c
+++ b/tree.c
@@ -3710,10 +3710,15 @@
             xmlFreePropList(cur->properties);
         if (cur->nsDef != NULL)
             xmlFreeNsList(cur->nsDef);
+    } else if ((cur->type == XML_COMMENT_NODE) ||
+               (cur->type == XML_TEXT_NODE) ||
+               (cur->type == XML_CDATA_SECTION_NODE) ||
+               (cur->type == XML_PI_NODE)) {
+        /* skip freeing content for comment, text, cdata, and PI nodes */
     } else if ((cur->content != NULL) &&
-               (cur->type != XML_ENTITY_REF_NODE) &&
-               (cur->content != (xmlChar *) &(cur->properties))) {
-        DICT_FREE(cur->content)
+               (cur->content != (xmlChar *) &(cur->properties)) &&
+               (cur->type != XML_ENTITY_REF_NODE)) {
+        DICT_FREE(cur->content);
     }
 
     /*
